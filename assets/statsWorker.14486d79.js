import{bp as T,k as y,ne as x,nf as w,ng as V,nh as F,ni as I,nj as E,nk as P,nl as h,nm as g,nn as D}from"./vendor.5a0f9a12.js";let d=null;async function v(n,a){if(!a)return[];const r=n.field,i=n.valueExpression,e=n.normalizationType,l=n.normalizationField,s=n.normalizationTotal,t=[],o=n.viewInfoParams;let u=null,c=null;if(i){if(!d){const{arcadeUtils:m}=await T();d=m}u=d.createFunction(i),c=o&&d.getViewInfo({viewingMode:o.viewingMode,scale:o.scale,spatialReference:new y(o.spatialReference)})}return a.forEach(m=>{const p=m.attributes;let f;if(i){const z=d.createExecContext(m,c);f=d.executeFunction(u,z)}else p&&(f=p[r]);if(e&&isFinite(f)){const z=p&&parseFloat(p[l]);f=x(f,e,z,s)}t.push(f)}),t}async function C(n){const{attribute:a,features:r}=n,{normalizationType:i,normalizationField:e,minValue:l,maxValue:s,fieldType:t}=a,o=await v({field:a.field,valueExpression:a.valueExpression,normalizationType:i,normalizationField:e,normalizationTotal:a.normalizationTotal,viewInfoParams:a.viewInfoParams},r),u=w({normalizationType:i,normalizationField:e,minValue:l,maxValue:s}),c={value:.5,fieldType:t},m=t==="esriFieldTypeString"?V({values:o,supportsNullCount:u,percentileParams:c}):F({values:o,minValue:l,maxValue:s,useSampleStdDev:!i,supportsNullCount:u,percentileParams:c});return I(m,t==="esriFieldTypeDate")}async function M(n){const{attribute:a,features:r}=n,i=await v({field:a.field,valueExpression:a.valueExpression,viewInfoParams:a.viewInfoParams},r),e=E(i);return P(e,a.domain,a.returnAllCodedValues)}async function S(n){const{attribute:a,features:r}=n,{field:i,normalizationType:e,normalizationField:l,normalizationTotal:s,classificationMethod:t}=a,o=await v({field:i,valueExpression:a.valueExpression,normalizationType:e,normalizationField:l,normalizationTotal:s,viewInfoParams:a.viewInfoParams},r),u=h(o,{field:i,normalizationType:e,normalizationField:l,normalizationTotal:s,classificationMethod:t,standardDeviationInterval:a.standardDeviationInterval,numClasses:a.numClasses,minValue:a.minValue,maxValue:a.maxValue});return g(u,t)}async function $(n){const{attribute:a,features:r}=n,{field:i,normalizationType:e,normalizationField:l,normalizationTotal:s,classificationMethod:t}=a,o=await v({field:i,valueExpression:a.valueExpression,normalizationType:e,normalizationField:l,normalizationTotal:s,viewInfoParams:a.viewInfoParams},r);return D(o,{field:i,normalizationType:e,normalizationField:l,normalizationTotal:s,classificationMethod:t,standardDeviationInterval:a.standardDeviationInterval,numBins:a.numBins,minValue:a.minValue,maxValue:a.maxValue})}export{S as classBreaks,$ as histogram,C as summaryStatistics,M as uniqueValues};
